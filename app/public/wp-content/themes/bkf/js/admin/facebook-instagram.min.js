var FB,BKFInstagram={CheckLoginStatus:function(){FB.getLoginStatus(function(t){"connected"===t.status?(BKFInstagram.UpdateFBToken(t),jQuery("#logout").show(),jQuery("#login").hide(),jQuery("#test").show(),jQuery("#run").show()):(jQuery("#login").show(),jQuery("#logout").hide(),jQuery("#test").hide(),jQuery("#run").hide()),console.log(t)})},UpdateFBToken:function(t){jQuery.ajax({url:ajaxurl+"?action=set_fb_token",method:"POST",data:{auth:t.authResponse,token:t.authResponse.accessToken},dataType:"json",success:function(t){console.log(t)},error:function(t){alert("There was an error connecting the site to Facebook.")}})},AddTestImage:function(t){if("VIDEO"!==t.media_type){var e=jQuery("<img />").attr("src",t.media_url);jQuery("#output").append(e)}},AddResultImage:function(t){if("VIDEO"!==t.type){var e=jQuery("<img />").attr("src",t.image);jQuery("#output").append(e)}}};!function(t,e,n){var o,a=t.getElementsByTagName(e)[0];t.getElementById(n)||((o=t.createElement(e)).id=n,o.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:"261998961180365",cookie:!0,xfbml:!0,version:"v3.2"}),FB.AppEvents.logPageView(),BKFInstagram.CheckLoginStatus()},jQuery(document).ready(function(n){n("#logout").on("click",function(){FB.logout(function(t){location.reload()})}),n("#update").on("click",BKFInstagram.UpdateFBToken),n("#test").on("click",function(){n("#status").html("Loading..."),n("#output").html(""),FB.api("/17841401025686951/media","GET",{fields:"media_url,caption,media_type,timestamp,id,children{media_type,media_url}",limit:"100"},function(t){t.error?n("#status").html("Error : "+t.error.message):n.each(t.data,function(t,e){BKFInstagram.AddTestImage(e),e.children&&n.each(e.children.data,function(t,e){BKFInstagram.AddTestImage(e)}),n("#status").html("Success!")})})}),n("#run").on("click",function(){n("#status").html("Running..."),n("#output").html(""),n.ajax({url:ajaxurl+"?action=instagram_import",method:"GET",success:function(t){n("#status").html("Import complete. Processed "+t.total+" Instagram posts. Imported "+t.inserts+". "+t.duplicates+" were duplicates. "+t.failures+" failed importing."),n.each(t.posts,function(t,e){BKFInstagram.AddResultImage(e)})},error:function(t){n("#status").html("Import did not complete fully. Likely this is do to the process taking too long. Trying running the importer again to complete the process."),n("#output").html(t)}})})});
// FB apparently wants this defined
var checkLoginState=BKFInstagram.CheckLoginStatus;